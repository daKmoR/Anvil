<head>
	<title>Anvil</title>
</head>

<body>
	{{> team}}
</body>


<template name="team">
	<div class="row">
		{{> loginButtons}}
		<br />
		<h1>Team View!</h1>

		<div class="small-6 column">
			<div class="panel">
				<label for="task-name"></label><input class="" id="task-name" type="text" value="" />
				<button id="add-task" class="tiny round">add</button>
			</div>

			<dl class="tabs" data-tab>
				<dd class="active"><a href="#tab-unassigned">Unassigned</a></dd>
				<dd><a href="#tab-all">All</a></dd>
				<dd><a href="#tab-projects">Projects</a></dd>
			</dl>
			<div class="tabs-content">
				<div class="content active" id="tab-unassigned">
					<div class="tasks sortable">
						{{#each tasks_unassigned}}
							<div class="task">
								<p><a href="#" data-reveal-id="task-detail-{{_id}}">{{name}}</a> <button class="remove-task tiny round">x</button></p>
							</div>
						{{/each}}
					</div>
				</div>
				<div class="content" id="tab-all">
					<div class="tasks sortable">
						{{#each tasks}}
							<div class="task">
								<p><a href="#" data-reveal-id="task-detail-{{_id}}">{{name}}</a> <button class="remove-task tiny round">x</button></p>
							</div>
						{{/each}}
					</div>
				</div>
				<div class="content" id="tab-projects">
					<p>selection of projects... todo</p>
				</div>
			</div>

		</div>

		{{#each users}}
			<div class="user small-3 column">
				<h4>{{profile.name}}</h4>
				<div class="tasks sortable" data-user-id="{{_id}}">
					{{#each assigned_tasks _id}}
						<div class="task">
							<p><a href="#" data-reveal-id="task-detail-{{_id}}">{{name}}</a> <button class="remove-task tiny round">x</button></p>
						</div>
					{{/each}}
				</div>
			</div>
		{{/each}}

	</div>

	{{#each tasks}}
		{{> task_detail}}
	{{/each}}

</template>

<template name="task_detail">
	<div id="task-detail-{{_id}}" class="task-detail reveal-modal" data-reveal>
		<h2>{{name}}</h2>
		<a class="close-reveal-modal">&#215;</a>
		<div class="messages">
			{{#each messages}}
				<div class="message clearfix">
					<h6>Max: </h6>
					<pre>{{this}}</pre>
				</div>
			{{/each}}
		</div>
		<label>
			<textarea class="new-task-message"></textarea>
		</label>
	</div>
</template>