<head>
	<title>Anvil</title>
</head>

<body>
	{{> team}}
</body>


<template name="team">
	<div class="team">
		{{> loginButtons}}
		<br />
		<h1>Team View!</h1>

		<div class="task-lists column">
			<ul class="nav nav-tabs">
				<li><a href="#tab-unassigned" data-toggle="tab">Unassigned</a></li>
				<li><a href="#tab-all" data-toggle="tab">All</a></li>
				<li><a href="#tab-projects" data-toggle="tab">Projects</a></li>
			</ul>
			<div class="tab-content">
				<div class="tab-pane active" id="tab-unassigned">
					<textarea class="new-task form-control" placeholder="New Task"></textarea>
					<div class="tasks sortable" data-user-tasks-list="tasks-unassigned">
						<span class="watermark">Tasks</span>
						{{> task_list tasks_unassigned}}
					</div>
				</div>
				<div class="tab-pane" id="tab-all">
					<div class="tasks sortable">
						<span class="watermark">Tasks</span>
							{{> task_list tasks}}
					</div>
				</div>
				<div class="tab-pane" id="tab-projects">
					<div class="projects">
						{{#each projects}}
							<div class="project">
								<a href="#">{{name}}</a> <a class="remove-project right">&#215;</a>
							</div>
						{{/each}}
					</div>
				</div>
			</div>
		</div>

		{{#each users}}
			<div class="user column">
				<h4>{{profile.name}}</h4>
				<div class="tasks sortable active" data-user-id="{{_id}}" data-user-tasks-list="user-active-tasks">
					<span class="watermark">Active</span>
					{{#each active_task _id}}
						<div class="task">
							<a href="#task-detail-{{_id}}" class="dialog">{{name}}</a> <a class="remove-task right">&#215;</a>
						</div>
					{{/each}}
				</div>
				<div class="tasks sortable" data-user-id="{{_id}}" data-user-tasks-list="user-tasks">
					<span class="watermark">Tasks</span>
					{{#each assigned_tasks _id}}
						<div class="task">
							<a href="#task-detail-{{_id}}" class="dialog">{{name}}</a> <a class="remove-task right">&#215;</a>
						</div>
					{{/each}}
				</div>
			</div>
		{{/each}}

	</div>

	{{#each tasks}}
		{{> task_detail}}
	{{/each}}

</template>

<template name="task_list">
	{{#each this}}
	<div class="task">
		<a href="#task-detail-{{_id}}" class="dialog">{{name}}</a> <a class="remove-task right">&#215;</a>
	</div>
	{{/each}}
</template>

<template name="task_detail">
	<!-- Modal -->
	<div class="modal fade task-detail" id="task-detail-{{_id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="myModalLabel">{{name}}</h4>
				</div>
				<div class="modal-body">
					<div class="messages">
						{{#each messages}}
						<div class="message clearfix">
							<h6>Max: </h6>
							<pre>{{this}}</pre>
						</div>
						{{/each}}
					</div>
					<textarea class="new-task-message form-control"></textarea>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					<button type="button" class="btn btn-primary">Save changes</button>
				</div>
			</div><!-- /.modal-content -->
		</div><!-- /.modal-dialog -->
	</div><!-- /.modal -->
</template>